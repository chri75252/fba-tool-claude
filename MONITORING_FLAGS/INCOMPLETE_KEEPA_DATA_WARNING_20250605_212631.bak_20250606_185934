{
  "timestamp": "2025-06-06T18:59:26.042992",
  "flag_type": "INCOMPLETE_KEEPA_DATA",
  "severity": "CRITICAL",
  "severity_escalated": true,
  "requires_action": true,
  "alert_summary": {
    "total_instances": 14,
    "severity_escalated": true,
    "original_severity": "WARNING",
    "timespan": "2025-06-06T18:53:18.087211 to 2025-06-06T18:59:26.026681",
    "data_sources_checked": [
      "amazon_cache",
      "ai_cache",
      "csv_reports",
      "supplier_cache",
      "linking_map"
    ],
    "monitoring_cycles": 2
  },
  "instances": [
    {
      "detection_timestamp": "2025-06-06T18:53:18.087211",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0C94W34XN_5056651001595.json",
      "file_modification_time": "2025-06-06T01:54:19.197571",
      "extracted_data": {
        "asin": "B0C94W34XN",
        "ean": "5056651001595",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Reviews - Rating",
          "Reviews - Rating Count",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 36,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:53:30.347944",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0CSWMJ5RL_title_3760bad5.json",
      "file_modification_time": "2025-06-06T02:01:33.316669",
      "extracted_data": {
        "asin": "B0CSWMJ5RL",
        "ean": null,
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Root"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 25,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:53:34.782517",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0D1VJPMD1_title_d482e2f0.json",
      "file_modification_time": "2025-06-06T02:03:45.474954",
      "extracted_data": {
        "asin": "B0D1VJPMD1",
        "ean": "5061027585883",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Root"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 26,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:53:39.063510",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0DNTR8BRN_title_e91b1f24.json",
      "file_modification_time": "2025-06-06T02:08:07.482272",
      "extracted_data": {
        "asin": "B0DNTR8BRN",
        "ean": "0716165256762",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Sub",
          "Website Display Group - Name",
          "ASIN"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 20,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:53:43.249366",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0F2J7PGM8_title_ccabe861.json",
      "file_modification_time": "2025-06-06T07:06:59.724494",
      "extracted_data": {
        "asin": "B0F2J7PGM8",
        "ean": "5061066491572",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Bought in past month",
          "Reviews - Rating",
          "Reviews - Rating Count",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 39,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:53:47.410728",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0F7FJVMC6_title_9b243ec0.json",
      "file_modification_time": "2025-06-06T01:54:19.213569",
      "extracted_data": {
        "asin": "B0F7FJVMC6",
        "ean": null,
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Root"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 28,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:53:51.635263",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0F8JD77JB_5060226063390.json",
      "file_modification_time": "2025-06-06T01:54:19.213569",
      "extracted_data": {
        "asin": "B0F8JD77JB",
        "ean": null,
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Root"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 29,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:53:54.385862",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0F9XH4C2V_title_e7d6a870.json",
      "file_modification_time": "2025-06-06T02:06:19.478227",
      "extracted_data": {
        "asin": "B0F9XH4C2V",
        "ean": "5027355008852",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBA Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Sub",
          "ASIN",
          "Product Codes - EAN"
        ],
        "missing_fees": [
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": true,
        "has_referral_fee": false,
        "total_keepa_fields": 19,
        "missing_fee_types": [
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:58:55.912462",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0C94W34XN_5056651001595.json",
      "file_modification_time": "2025-06-06T01:54:19.197571",
      "extracted_data": {
        "asin": "B0C94W34XN",
        "ean": "5056651001595",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Reviews - Rating",
          "Reviews - Rating Count",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 36,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:59:07.915786",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0CSWMJ5RL_title_3760bad5.json",
      "file_modification_time": "2025-06-06T02:01:33.316669",
      "extracted_data": {
        "asin": "B0CSWMJ5RL",
        "ean": null,
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Root"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 25,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:59:12.470541",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0D1VJPMD1_title_d482e2f0.json",
      "file_modification_time": "2025-06-06T02:03:45.474954",
      "extracted_data": {
        "asin": "B0D1VJPMD1",
        "ean": "5061027585883",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Root"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 26,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:59:16.928182",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0DNTR8BRN_title_e91b1f24.json",
      "file_modification_time": "2025-06-06T02:08:07.482272",
      "extracted_data": {
        "asin": "B0DNTR8BRN",
        "ean": "0716165256762",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Sub",
          "Website Display Group - Name",
          "ASIN"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 20,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:59:21.590344",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0F2J7PGM8_title_ccabe861.json",
      "file_modification_time": "2025-06-06T07:06:59.724494",
      "extracted_data": {
        "asin": "B0F2J7PGM8",
        "ean": "5061066491572",
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Bought in past month",
          "Reviews - Rating",
          "Reviews - Rating Count",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 39,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    },
    {
      "detection_timestamp": "2025-06-06T18:59:26.026681",
      "source_file_path": "OUTPUTS/FBA_ANALYSIS/amazon_cache/amazon_B0F7FJVMC6_title_9b243ec0.json",
      "file_modification_time": "2025-06-06T01:54:19.213569",
      "extracted_data": {
        "asin": "B0F7FJVMC6",
        "ean": null,
        "keepa_status": "Extraction process completed",
        "supplier_product_name": "Unknown",
        "keepa_data_fields": [
          "Title",
          "Sales Rank - Reference",
          "Sales Rank - Display Group",
          "Last Price Change",
          "Buy Box Seller",
          "Lowest FBM Seller",
          "Total Offer Count",
          "Tracking since",
          "Listed since",
          "Categories - Root"
        ],
        "missing_fees": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      },
      "specific_issue": "Missing critical fee data: FBA Pick&Pack Fee, Referral Fee",
      "resolution_suggestions": [
        "Verify product is eligible for FBA",
        "Check Keepa data extraction selectors",
        "Verify product category has fee data",
        "Check if product is restricted"
      ],
      "impact_assessment": "Cannot calculate accurate profit margins",
      "data_quality_metrics": {
        "has_fba_fee": false,
        "has_referral_fee": false,
        "total_keepa_fields": 28,
        "missing_fee_types": [
          "FBA Pick&Pack Fee",
          "Referral Fee"
        ]
      }
    }
  ],
  "progress_tracking": {
    "products_progress": {
      "total_supplier_products": 1157,
      "products_with_amazon_data": 141,
      "products_with_complete_keepa": 136,
      "current_processing_index": 40,
      "processing_completion_rate": 3.457216940363008,
      "amazon_cache_coverage": 12.186689714779602,
      "keepa_success_rate": 96.45390070921985
    },
    "financial_analysis_progress": {
      "csv_reports_generated": 65,
      "latest_csv_file": "OUTPUTS/FBA_ANALYSIS/financial_reports/fba_financial_report_20250606_184254.csv",
      "latest_csv_modification_time": "2025-06-06T18:42:54.604320",
      "products_in_latest_csv": 37,
      "complete_financial_records": 28,
      "financial_data_completeness_rate": 75.67567567567568,
      "fba_summary_files": 175,
      "latest_fba_summary": {
        "file": "OUTPUTS/FBA_ANALYSIS/fba_summary_clearance-king_co_uk_20250606_184229.json",
        "modification_time": "2025-06-06T18:42:34.494127",
        "session_data": {
          "total_supplier_products": 1110,
          "products_analyzed_ean": 0,
          "products_analyzed_title": 0,
          "products_passed_triage": 0,
          "products_rejected_by_triage": 0,
          "products_previously_visited": 3,
          "profitable_products": 0,
          "errors": 0,
          "start_time": "2025-06-06T18:42:29.211784",
          "end_time": "2025-06-06T18:42:33.789034"
        }
      }
    },
    "ai_category_progress": {
      "ai_cache_files": 1,
      "error_reading_clearance-king_co_uk_ai_category_cache.json": "'str' object has no attribute 'get'",
      "total_categories_suggested": 0,
      "categories_validated_productive": 0,
      "categories_scraped": 0,
      "latest_suggestion_timestamp": null,
      "duplicate_ai_suggestions": 0,
      "duplicate_urls": []
    },
    "data_quality_metrics": {
      "amazon_cache_quality": {
        "files_checked": 100,
        "keepa_success_rate": 97.0,
        "keepa_timeout_rate": 1.0,
        "missing_ean_rate": 90.72164948453609,
        "missing_fees_rate": 100.0
      },
      "linking_map_error": "'list' object has no attribute 'values'"
    },
    "system_health": {
      "disk_space": {
        "free_gb": 263.6654167175293,
        "used_gb": 664.8355560302734,
        "total_gb": 928.5009727478027,
        "usage_percentage": 71.60310818660332
      },
      "fba_processes": [
        {
          "pid": 2516,
          "name": "bash",
          "status": "sleeping",
          "memory_mb": 1.80078125
        },
        {
          "pid": 2519,
          "name": "python",
          "status": "sleeping",
          "memory_mb": 204.71875
        },
        {
          "pid": 2546,
          "name": "node",
          "status": "sleeping",
          "memory_mb": 202.875
        },
        {
          "pid": 2564,
          "name": "bash",
          "status": "sleeping",
          "memory_mb": 3.375
        },
        {
          "pid": 2589,
          "name": "python",
          "status": "running",
          "memory_mb": 20.078125
        }
      ],
      "process_count": 5,
      "file_system": {
        "amazon_cache_files": 141,
        "csv_reports": 66,
        "ai_cache_files": 1,
        "supplier_cache_files": 2
      }
    }
  },
  "data_quality_summary": {
    "overall_quality_score": 57.37652546163184,
    "quality_grade": "POOR",
    "component_scores": {
      "keepa_extraction": 96.45390070921985,
      "financial_analysis": 75.67567567567568,
      "ai_suggestions": 0
    }
  }
}